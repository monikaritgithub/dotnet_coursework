@model DotNetCourse.Models.UserModel

@{
    ViewData["Title"] = "Sign Up";
    var username = Context.Session.GetString("UserRole");
}

@if (Context.Session.GetString("UserId") != null && Context.Session.GetString("UserRole") != "Admin")
{
    <script>
        window.location.href = '@Url.Action("Index", "Blog")';
    </script>
}


<div class="container mt-5 border border-dark rounded p-4 col-md-6">
    <div class="row justify-content-center">
        <div class="col-md-12">
            @if (Context.Session.GetString("UserRole") == "Admin")
            {
                <h2 class="text-center mb-4">Create User</h2>

                <form asp-action="SignUp" method="post" class="signup-form">
                    <div class="form-group">
                        <label for="Name" class="text-muted">Username:</label>
                        <input type="text" name="UserName" id="Name" value="@Model.Username" class="form-control bg-light border-dark" />
                        <span class="text-danger">@Html.ValidationMessageFor(model => model.Username)</span>
                    </div>
                    <div class="form-group">
                        <label for="Email" class="text-muted">Email:</label>
                        <input type="email" name="Email" id="Email" value="@Model.Email" class="form-control bg-light border-dark" />
                        <span class="text-danger">@Html.ValidationMessageFor(model => model.Email)</span>
                    </div>
                    <div class="form-group">
                        <label for="Password" class="text-muted">Password:</label>
                        <input type="password" name="Password" id="Password" value="@Model.Password" class="form-control bg-light border-dark" />
                        <span class="text-danger">@Html.ValidationMessageFor(model => model.Password)</span>
                    </div>

                    <div class="form-group">
                        <label for="Role" class="text-muted">Role:</label>
                        <select name="Role" id="Role" class="form-control bg-light border-dark">

                            @foreach (var role in Enum.GetValues(typeof(DotNetCourse.Models.UserRole)))
                            {
                                <option value="@role">@role</option>
                            }
                        </select>
                        <span class="text-danger">@Html.ValidationMessageFor(model => model.Role)</span>
                    </div>

                    <button type="submit" class="btn btn-primary btn-block">Create User</button>
                </form>
            }
            else
            {
                <h2 class="text-center mb-4">Sign Up</h2>

                <form asp-action="SignUp" method="post" class="signup-form">
                    <div class="form-group">
                        <label for="Name" class="text-muted">Username:</label>
                        <input type="text" name="UserName" id="Name" value="@Model.Username" class="form-control bg-light border-dark" />
                        <span class="text-danger">@Html.ValidationMessageFor(model => model.Username)</span>
                    </div>
                    <div class="form-group">
                        <label for="Email" class="text-muted">Email:</label>
                        <input type="email" name="Email" id="Email" value="@Model.Email" class="form-control bg-light border-dark" />
                        <span class="text-danger">@Html.ValidationMessageFor(model => model.Email)</span>
                    </div>
                    <div class="form-group">
                        <label for="Password" class="text-muted">Password:</label>
                        <input type="password" name="Password" id="Password" value="@Model.Password" class="form-control bg-light border-dark" />
                        <span class="text-danger">@Html.ValidationMessageFor(model => model.Password)</span>
                    </div>

                    <input type="hidden" name="Role" value="blogger" />

                    <button type="submit" class="btn btn-info btn-block mt-4">Sign Up</button>
                </form>
            }
        </div>
    </div>
</div>

